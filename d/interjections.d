//MALAVON'S SIMULACRUM

INTERJECT_COPY_TRANS DMALASIM 0 XIK-DMALASIM.0
== L#XIKJ IF ~InParty("L#XIK") !StateCheck("L#XIK",CD_STATE_NOTVALID)~ THEN
@0
==DMALASIM @1
==L#XIKJ @2
==DMALASIM @3
==L#XIKJ @4
==DMALASIM @5
END

//MALAVON

INTERJECT DMALAVON 1 XIK-DMALAVON.1
== L#XIKJ IF ~InParty("L#XIK") !StateCheck("L#XIK",CD_STATE_NOTVALID)~ THEN
@6
==DMALAVON @7
==DMALAVON @8
==L#XIKJ @9
==DMALAVON @10
==DMALAVON @11
==L#XIKJ @12
==DMALAVON @13 
==L#XIKJ @14
==DMALAVON @15
==L#XIKJ @16
==DMALAVON @17
==L#XIKJ @18
==DMALAVON @19
END
IF~Global("L#XIFriendshipActive","GLOBAL",3)~THEN EXTERN L#XIKJ XIK-DMALAVON.1-r1
IF~Global("L#XIFriendshipActive","GLOBAL",2)~THEN EXTERN L#XIKJ XIK-DMALAVON.1-r2
IF~OR(2) Global("L#XIFriendshipActive","GLOBAL",0) Global("L#XIFriendshipActive","GLOBAL",1)~THEN EXTERN L#XIKJ XIK-DMALAVON.1-r3

CHAIN L#XIKJ XIK-DMALAVON.1-r1
@20
END
IF~~THEN REPLY @21 EXTERN L#XIKJ XIK-DMALAVON.1-r1-1
IF~~THEN REPLY @22 EXTERN L#XIKJ XIK-DMALAVON.1-r1-1
IF~~THEN REPLY @23 EXTERN L#XIKJ XIK-DMALAVON.1-r1-1

CHAIN L#XIKJ XIK-DMALAVON.1-r1-1
@24
==L#XIKJ @25
==DMALAVON @26
==L#XIKJ @27
==L#XIKJ @28
DO ~LeaveParty() SetGlobal("L#XIKJoined","GLOBAL",0) SetGlobal("L#XIAlliedWithMalavon","GLOBAL",1) Enemy()~
==DMALAVON @29
EXTERN DMALAVON 2

CHAIN L#XIKJ XIK-DMALAVON.1-r2
@30
==DMALAVON @31
EXTERN DMALAVON 2

CHAIN L#XIKJ XIK-DMALAVON.1-r3
@32
==DMALAVON @33
END
IF~~THEN REPLY @34 EXTERN L#XIKJ XIK-DMALAVON.1-r3-1
IF~~THEN REPLY @35 EXTERN L#XIKJ XIK-DMALAVON.1-r3-2
IF~~THEN REPLY @36 EXTERN L#XIKJ XIK-DMALAVON.1-r3-3

CHAIN L#XIKJ XIK-DMALAVON.1-r3-1
@37
==DMALAVON @38
EXTERN DMALAVON 2

CHAIN L#XIKJ XIK-DMALAVON.1-r3-2
@39
==DMALAVON @40
EXTERN DMALAVON 2

CHAIN L#XIKJ XIK-DMALAVON.1-r3-3
@41
DO ~LeaveParty() SetGlobal("L#XIKJoined","GLOBAL",0) SetGlobal("L#XIAlliedWithMalavon","GLOBAL",1) Enemy()~ 
==DMALAVON @42
EXTERN DMALAVON 2

//OTHER

INTERJECT_COPY_TRANS DYXUN 17 XIK-DYXUN.17
== L#XIKJ IF ~InParty("L#XIK") !StateCheck("L#XIK",CD_STATE_NOTVALID)~ THEN
@43
END

INTERJECT_COPY_TRANS DLETHIAS 1 XIK-LETHIAS.1
== L#XIKJ IF ~InParty("L#XIK") !StateCheck("L#XIK",CD_STATE_NOTVALID)~ THEN
@44
END

INTERJECT_COPY_TRANS DLETHIAS 3 XIK-LETHIAS.3
== L#XIKJ IF ~InParty("L#XIK") !StateCheck("L#XIK",CD_STATE_NOTVALID)~ THEN
@45
END

INTERJECT_COPY_TRANS DLARREL 54 XIK-LARREL.54
== L#XIKJ IF ~InParty("L#XIK") !StateCheck("L#XIK",CD_STATE_NOTVALID)~ THEN
@46
END

INTERJECT_COPY_TRANS DSAABLIC 3 XIK-SAABLIC.3
== L#XIKJ IF ~InParty("L#XIK") !StateCheck("L#XIK",CD_STATE_NOTVALID)~ THEN
@47
END

INTERJECT_COPY_TRANS DNORLINO 3 XIK-NORLINO.3
== L#XIKJ IF ~InParty("L#XIK") !StateCheck("L#XIK",CD_STATE_NOTVALID)~ THEN
@48
END

INTERJECT_COPY_TRANS DBEORN 10 XIK-BEORN.10
== L#XIKJ IF ~InParty("L#XIK") !StateCheck("L#XIK",CD_STATE_NOTVALID)~ THEN
@49
END

INTERJECT_COPY_TRANS DBEORN 20 XIK-BEORN.20
== L#XIKJ IF ~InParty("L#XIK") !StateCheck("L#XIK",CD_STATE_NOTVALID)~ THEN
@50
END

INTERJECT_COPY_TRANS DGINA2 8 XIK-GINA.8
== L#XIKJ IF ~InParty("L#XIK") !StateCheck("L#XIK",CD_STATE_NOTVALID)~ THEN
@51
END

INTERJECT_COPY_TRANS DGINA2 11 XIK-GINA.11
== L#XIKJ IF ~InParty("L#XIK") !StateCheck("L#XIK",CD_STATE_NOTVALID)~ THEN
@52
END

INTERJECT_COPY_TRANS DGINAFAE 8 XIK-GINAFAE.8
== L#XIKJ IF ~InParty("L#XIK") !StateCheck("L#XIK",CD_STATE_NOTVALID)~ THEN
@51
END

INTERJECT_COPY_TRANS DGINAFAE 11 XIK-GINAFAE.11
== L#XIKJ IF ~InParty("L#XIK") !StateCheck("L#XIK",CD_STATE_NOTVALID)~ THEN
@52
END